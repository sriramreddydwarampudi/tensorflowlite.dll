
import urllib.request
import zipfile
import os

print("Downloading pre-built TensorFlow Lite C library for Windows...")

# TensorFlow provides pre-built libraries
# You can also build from Bazel which is more reliable

# Method 1: Download from TensorFlow releases (if available)
# Check: https://github.com/tensorflow/tensorflow/releases

# Method 2: Build using Bazel (most reliable)
print("\nInstalling Bazelisk...")
!wget https://github.com/bazelbuild/bazelisk/releases/download/v1.19.0/bazelisk-linux-amd64 -O bazelisk
!chmod +x bazelisk
!./bazelisk --version

print("\nCloning TensorFlow...")
!rm -rf tensorflow
!git clone --depth 1 --branch v2.18.0 https://github.com/tensorflow/tensorflow.git
%cd tensorflow

print("\nBuilding with Bazel (this will take 20-30 minutes)...")
!./bazelisk build -c opt //tensorflow/lite/c:tensorflowlite_c

print("\n=== Locating built library ===")
!find bazel-bin -name "*tensorflowlite_c*"

# Copy outputs
!mkdir -p /content/output
!cp -r bazel-bin/tensorflow/lite/c/* /content/output/ 2>/dev/null || true
!find /content/output -type f

# For headers
!mkdir -p /content/output/include
!cp tensorflow/lite/c/*.h /content/output/include/

print("\n=== Results ===")
!ls -lh /content/output/

%cd /content
!tar -czf tensorflowlite_c.tar.gz output/
from google.colab import files
files.download('tensorflowlite_c.tar.gz')
